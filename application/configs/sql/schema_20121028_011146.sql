CREATE TABLE user (id BIGINT AUTO_INCREMENT, username VARCHAR(30) NOT NULL UNIQUE, password VARCHAR(100) NOT NULL, namalengkap VARCHAR(30), role VARCHAR(20), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE periksa_resep (id BIGINT AUTO_INCREMENT, periksa_id BIGINT NOT NULL, resep_name VARCHAR(100), resep_path VARCHAR(100), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX periksa_id_idx (periksa_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE periksa_keluhan (id BIGINT AUTO_INCREMENT, periksa_id BIGINT NOT NULL, keluhan VARCHAR(255) NOT NULL, diagnosa VARCHAR(255), pengobatan VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX periksa_id_idx (periksa_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE periksa_diagnosa (id BIGINT AUTO_INCREMENT, pemeriksaan VARCHAR(30) NOT NULL, periksa_id BIGINT NOT NULL, hasil VARCHAR(100) NOT NULL, catatan VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX periksa_id_idx (periksa_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE periksa (id BIGINT AUTO_INCREMENT, pasien_id BIGINT NOT NULL, type_pemeriksaan VARCHAR(30), no_urut INT NOT NULL, penyakit VARCHAR(30), referensi_riwayat BIGINT, diagnosa VARCHAR(255), pengobatan VARCHAR(255), catatan VARCHAR(255), status TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX pasien_id_idx (pasien_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE daftar_rs (id BIGINT AUTO_INCREMENT, nama VARCHAR(30) NOT NULL, alamat VARCHAR(255), kelas VARCHAR(10), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE daftar_alergi (id BIGINT AUTO_INCREMENT, nama VARCHAR(30) NOT NULL UNIQUE, catatan VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE pasien_alergi (id BIGINT AUTO_INCREMENT, pasien_id BIGINT NOT NULL, alergi VARCHAR(30), catatan VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX pasien_id_idx (pasien_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE daftar_obat (id BIGINT AUTO_INCREMENT, nama VARCHAR(30) NOT NULL UNIQUE, code VARCHAR(30) NOT NULL UNIQUE, type_obat VARCHAR(25), produsen VARCHAR(30) NOT NULL, isgeneric TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE periksa_obat (id BIGINT AUTO_INCREMENT, periksa_id BIGINT NOT NULL, obat VARCHAR(30), dosis VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX periksa_id_idx (periksa_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE pasien (id BIGINT AUTO_INCREMENT, nama VARCHAR(40) NOT NULL, tgllahir DATE, jnskelamin VARCHAR(255), goldarah VARCHAR(255), alamat VARCHAR(255), telepon VARCHAR(15), email VARCHAR(50), catatan VARCHAR(255), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE periksa_resep ADD CONSTRAINT periksa_resep_periksa_id_periksa_id FOREIGN KEY (periksa_id) REFERENCES periksa(id);
ALTER TABLE periksa_keluhan ADD CONSTRAINT periksa_keluhan_periksa_id_periksa_id FOREIGN KEY (periksa_id) REFERENCES periksa(id);
ALTER TABLE periksa_diagnosa ADD CONSTRAINT periksa_diagnosa_periksa_id_periksa_id FOREIGN KEY (periksa_id) REFERENCES periksa(id);
ALTER TABLE periksa ADD CONSTRAINT periksa_pasien_id_pasien_id FOREIGN KEY (pasien_id) REFERENCES pasien(id);
ALTER TABLE pasien_alergi ADD CONSTRAINT pasien_alergi_pasien_id_pasien_id FOREIGN KEY (pasien_id) REFERENCES pasien(id);
ALTER TABLE periksa_obat ADD CONSTRAINT periksa_obat_periksa_id_periksa_id FOREIGN KEY (periksa_id) REFERENCES periksa(id);
